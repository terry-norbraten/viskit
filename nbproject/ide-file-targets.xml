<?xml version="1.0" encoding="UTF-8"?>
<project basedir=".." name="Viskit-IDE">
    <import file="../build.xml"/>
    
    <!-- TODO: edit the following target according to your needs -->
    <!-- (more info: http://www.netbeans.org/kb/41/freeform-config.html#runsingle) -->
    <target name="run-selected-file-in-Viskit">
        <fail unless="run.class">Must set property 'run.class'</fail>
        
        <!-- This target assumes that viskit.jar is already built -->
        <!--java classname="viskit.xsd.translator.SimkitXML2Java" failonerror="true" fork="true"-->
        <java classname="viskit.xsd.assembly.SimkitAssemblyXML2Java" failonerror="true" fork="true">
            <classpath>
                <path refid="runtime.classpath.paths"/>
            </classpath>
            <!--arg value="${basedir}/BehaviorLibraries/examples/ServerWithReneges.xml"/-->
            <arg value="-f"/>
            <arg value="${basedir}/BehaviorLibraries/examples/ServerWithRenegesAssembly.xml"/>
            <jvmarg value="-Djava.endorsed.dirs=${java.endorsed}"/>
        </java>
    </target>
    
    <!-- To compile single files and update the viskit.jar -->
    <!-- (more info: http://www.netbeans.org/kb/41/freeform-config.html#compilesingle) -->
    <target name="compile-selected-files-in-src">
        <fail unless="files">Must set property 'files'</fail>
        <mkdir dir="build/classes"/>
        <javac destdir="build/classes" includes="${files}" source="1.5" srcdir="src">
            
            <!-- Reveals generics and deprecation warings -->
            <compilerarg value="${javac.unchecked}"/>
            <compilerarg value="${javac.deprecation}"/>
            <classpath>
                <path refid="runtime.classpath.paths"/>
           </classpath> 
        </javac>
        <echo message="${files}"/>
        <jar basedir="${dir.build.classes}" 
             compress="false"
             destfile="${dist.jar}"
             update="true"/>
    </target>
    
    <!-- To update the viskit.jar with AnalystReportXMLtoHTML.xslt -->
    <!-- (more info: http://www.netbeans.org/kb/41/freeform-config.html#compilesingle) -->
    <target name="update-viskit-jar-with-AnalystReportXMLtoHTML-xslt">
        <echo message="${analyst.reports.stylesheet}"/>
        <copy todir="${dir.build.classes}">
            <fileset dir="${basedir}">
                <include name="${analyst.reports.stylesheet}"/>
            </fileset>
        </copy>
        <jar basedir="${dir.build.classes}" 
             compress="false"
             destfile="${dist.jar}"
             update="true"/>
    </target>
</project>
