<?xml version="1.0" encoding="UTF-8"?>
<project basedir="." default="build-run-default" name="Viskit">
    <description>
        Ant build file for the NPS Viskit and associated libraries. Third
        party jar files are not compiled from source here, but they are copied as
        necessary for the Viskit distribution.  This buildfile was created and tested
        using Ant version 1.5.1
    </description>

    <!-- magic properties, do not change or delete -->

    <property name="build.compiler" value="modern"/>

    <!-- CVS properties (this file) -->
    <property name="CVSId" value="$Id$"/>

    <!-- Project directories -->

    <property description="Root of the Viskit source tree." location="." name="dir.src"/>

    <property description="Root of the Viskit binary tree." location="${basedir}/build" name="dir.build"/>
          
    <property description="Directory for built and copied jar files that will wind up in dir.dist." location="${dir.build}/lib" name="dir.build.lib"/>
          
    <property description="Where the distribution files wind up." location="${basedir}/dist" name="dir.dist"/>
          
    <property description="Location of Viskit's dependencies" location="${basedir}/lib" name="dir.lib"/>
          
    <property description="Where all the JWSDP extensions are." location="${dir.lib}/jwsdp-1.5" name="dir.lib.xml"/>
    
    <property description="Runtime module extension libraries." location="${dir.lib}/ext" name="dir.lib.ext"/>
          
    <property description="Location of class files resulting from operations of this build file." location="${dir.build}/classes" name="dir.build.classes"/>
          
    <property description="Root of the javadoc tree for Viskit." location="${dir.build}/doc" name="dir.build.doc"/>
              
    <property description="Generated JAXB bindings for Simevg" location="${dir.src}/viskit/xsd/bindings/eventgraph" name="dir.src.simevg"/>
              
    <property description="Generated JAXB bindings for Simasm" location="${dir.src}/viskit/xsd/bindings/assembly" name="dir.src.simasm"/>
    
    <property description="Generated JAXB bindings for CLI config" location="${dir.src}/viskit/xsd/bindings/cli" name="dir.src.cli"/>
    
    <property description="Generated JAXB bindings for SGE qstat config" location="${dir.src}/viskit/xsd/bindings/sge/qstat" name="dir.src.sge.qstat"/>
    
    <property description="Examples directory" location="${dir.src}/examples" name="dir.examples"/>
    
    <property description="Behavior Libraries Directory" location="${basedir}/BehaviorLibraries" name="behavior.lib" />
    
    <property description="DISKIT directory" location="${dir.src}/../DISKIT" name="dir.diskit"/>
              
    <property description="Simasm utility" location="${dir.src}/viskit/xsd/assembly" name="dir.src.simasm.util"/>
    
    <property description="CLI utility" location="${dir.src}/viskit/xsd/cli" name="dir.src.cli.util"/>
    
    <property description="SGE utilities" location="${dir.src}/viskit/xsd/sge" name="dir.src.sge.util"/>
    
    <property description="Simevg utility" location="${dir.src}/viskit/xsd/translator" name="dir.src.simevg.util"/>

    <property description="where the help source sits" location="${dir.src}/viskit/javahelp" name="javahelp"/>
    
    <property description="where the generated and copied help files go" location="${dir.build.classes}/viskit/javahelp" name="build.javahelp"/>
    
    <path id="runtime.extension.classes">
        <fileset dir="${dir.lib.ext}" includes="*.jar"/>
    </path>
    
    <path id="jaxb.classes">
        <fileset dir="${dir.lib.xml}" includes="*.jar"/>
    </path>

    <!-- access to local environment variables -->
    <property environment="env"/>

    <target name="checkJAVA_HOME" unless="env.JAVA_HOME">
        <echo message="warning:  JAVA_HOME not set!"/>
    </target>

    <path id="runtime.classpath">
    
        <!-- use local JDK for tools.jar -->
        <!-- remember to override your environment variable for -->
        <!-- JAVA_HOME to point to the JDK version you are building -->
        <!-- against. Netbeans sets this in the NETBEANS_HOME/etc/netbeans.conf file -->
        <pathelement location="${env.JAVA_HOME}/lib/tools.jar"/>
        <pathelement location="${dir.build}/lib/viskit.jar"/>
        <pathelement location="${dir.lib}/simkit.jar"/>
        <pathelement location="${dir.lib}/bsh-2.0b1.jar"/>
        <pathelement location="${dir.lib}/jgraph.jar"/>
        <pathelement location="${dir.lib}/actions.jar"/>
        <pathelement location="${dir.lib}/jhall.jar"/>
        <pathelement location="${dir.lib}/jdom.jar"/>
        <pathelement location="${dir.lib}/jfreechart-1.0.1.jar"/>
        <pathelement location="${dir.lib}/jcommon-1.0.0.jar"/>
        <pathelement location="${dir.lib}/junit.jar"/>
        <pathelement location="${dir.lib}/commons-beanutils-1.7.0.jar"/>
        <pathelement location="${dir.lib}/commons-codec-1.3.jar"/>
        <pathelement location="${dir.lib}/commons-collections-3.1.jar"/>
        <pathelement location="${dir.lib}/commons-configuration-1.1.jar"/>
        <pathelement location="${dir.lib}/commons-digester-1.6.jar"/>
        <pathelement location="${dir.lib}/commons-lang-2.0.jar"/>
        <pathelement location="${dir.lib}/commons-logging-1.0.4.jar"/>
        <pathelement location="${dir.lib}/log4j-1.2.8.jar"/>
        <pathelement location="${dir.lib}/looks-1.3.1.jar"/>
        <pathelement location="${dir.lib}/xerces.jar"/>
        <pathelement location="${dir.lib}/xmlrpc-2.0.jar"/>
        <path refid="jaxb.classes"/>
        <path refid="runtime.extension.classes"/>
    </path>

    <!--  === TARGET: help === -->
    <target name="help">
        <echo>
            This is the Ant build file for the NPS Viskit and associated libraries.
            Third-party jar files are not compiled from source here, but they are
            copied as necessary for the simkit distribution.  This buildfile was created
            and tested using Ant version 1.5.1. Modified from Simkit's build.xml.
        </echo>
    </target>

    <!--  === TARGET: init === -->
    <target description="Preparatory actions required for all targets." name="init">
        <tstamp/>
        <echo message="Build started on ${DSTAMP} at ${TSTAMP}"/>
        <echo message="Buildfile version ${CVSId}"/>
        <echo message="Base directory: ${basedir}"/>
        <echo message="Source directory: ${dir.src}"/>
        <echo message="Build directory: ${dir.build}"/>
        <echo message="JAVA_HOME: ${env.JAVA_HOME}"/>
    </target>

    <!--  === TARGET: build.init === -->
    <target depends="init" description="Preparatory actions for compilation and documentation targets" name="build.init">
        <mkdir dir="${dir.build}"/>
        <mkdir dir="${dir.build.lib}"/>
        <mkdir dir="${dir.build.classes}"/>
        <mkdir dir="${dir.build.doc}"/>
        <mkdir dir="${dir.src.simevg}"/>
        <mkdir dir="${dir.src.simasm}"/>
        <mkdir dir="${dir.src.cli}"/>
        <mkdir dir="${dir.lib.ext}"/>
    </target>

    <target depends="init" description="build the help search database" name="javahelp">
        <java classname="com.sun.java.help.search.Indexer">
            <arg value="-db"/>
            <arg value="${build.javahelp}/JavaHelpSearch"/>
            <arg value="${javahelp}/Pages"/>
            <classpath>
                <pathelement location="${dir.lib}/jhall.jar"/>
            </classpath>
        </java>
        <copy todir="${build.javahelp}">
            <fileset dir="${javahelp}"/>
        </copy>

    </target>

    <!--  === TARGET: clean === -->
    <target depends="init" description="Deletes build directory, javadoc directory and dist directory" name="clean">
        <delete dir="${dir.src.simevg}"/>
        <delete dir="${dir.src.simasm}"/>
        <delete dir="${dir.src.cli}"/>
        <delete dir="${dir.build}"/>
        <delete dir="${dir.dist}"/>
    </target>

    <!--  === TARGET: compile === -->
    <target depends="init,compile.simxml.util" name="compile">
        <javac verbose="yes" destdir="${dir.build.classes}" excludes="xsd/**"
            debug="on"
            source="1.4"
            target="1.4">
            <classpath>
                <pathelement location="${dir.lib}/bsh-2.0b1.jar"/>
                <pathelement location="${dir.lib}/jdom.jar"/>
                <pathelement location="${dir.lib}/jgraph.jar"/>
                <pathelement location="${dir.lib}/actions.jar"/>
                <pathelement location="${dir.lib}/simkit.jar"/>
                <pathelement location="${dir.lib}/trang.jar"/>
                <pathelement location="${dir.lib}/trangtask.jar"/>
                <pathelement location="${dir.lib}/jhall.jar"/>
                <pathelement location="${dir.lib}/jfreechart-1.0.1.jar"/>
                <pathelement location="${dir.lib}/jcommon-1.0.0.jar"/>
                <pathelement location="${dir.lib}/commons-beanutils-1.7.0.jar"/>
                <pathelement location="${dir.lib}/commons-collections-3.1.jar"/>
                <pathelement location="${dir.lib}/commons-configuration-1.1.jar"/>
                <pathelement location="${dir.lib}/commons-digester-1.6.jar"/>
                <pathelement location="${dir.lib}/commons-lang-2.0.jar"/>
                <pathelement location="${dir.lib}/commons-logging-1.0.4.jar"/>
                <pathelement location="${dir.lib}/cli.jar"/>
                <pathelement location="${dir.lib}/log4j-1.2.8.jar"/>
                <pathelement location="${dir.lib}/looks-1.3.1.jar"/>
                <pathelement location="${dir.lib}/xerces.jar"/>
                <pathelement location="${dir.lib}/xmlrpc-2.0.jar"/>
                <pathelement location="${dir.build.classes}"/>
                <fileset dir="${dir.lib.xml}" includes="*.jar"/>
            </classpath>
            <src path="${dir.src}/viskit/"/>
            <src path="${dir.src}/edu/"/>
        </javac>
        <copy todir="${dir.build.classes}">
            <fileset dir="${dir.src}">
                <include name="**/*.txt"/>
                <include name="**/*.png"/>
                <include name="**/*.gif"/>
                <include name="**/*.jpg"/>
                <include name="*.txt"/>
                <exclude name="build/"/>
            </fileset>
        </copy>
    </target>
    <!--  === TARGET: jar === -->
    <target depends="compile,javahelp" name="jar">
        <!-- remove for dist 
        <jar basedir="${dir.build.classes}" compress="false" excludes="*/test/*" jarfile="${dir.build.lib}/viskit.jar"/>
        -->
        <jar basedir="${dir.build.classes}" compress="false" jarfile="${dir.build.lib}/viskit.jar"/>
    
    </target>

    <target depends="compile.bindings" name="jar-stage1">
        <!-- remove for dist
        <jar basedir="${dir.build.classes}" compress="false" excludes="*/test/*" jarfile="${dir.build.lib}/visxml.jar"/>
        -->    
        <jar basedir="${dir.build.classes}" compress="false" excludes="*/test/*" jarfile="${dir.build.lib}/visxml.jar"/>
       
    </target>

    <target name="splashy">
        <splash imageurl="file:${dir.src}/viskit/images/ViskitSplash2.png" showduration="0"/>
    </target>
    <!--  === TARGET: doc. Create javadocs and put the result in the docs directory. === -->
    <target depends="build.init,compile" description="Create the javadoc for Viskit." name="doc">
        <javadoc access="private" author="true" destdir="${dir.build.doc}" excludepackagenames="*.test.*" sourcepath="${dir.src}" version="true">
            <!-- Include all the jar files in the lib directory; this prevents some
            javadoc warnings about classes not being found. -->
            <classpath>
                <fileset dir="${dir.lib.xml}" includes="*.jar"/>
                <fileset dir="${dir.lib}" includes="*.jar"/>
                <fileset dir="${dir.lib}/jwsdp-1.5" includes="*.jar"/>
            </classpath>
            <package name="viskit"/>
            <package name="viskit.xsd"/>
            <package name="viskit.xsd.bindings.eventgraph"/>
            <package name="viskit.xsd.bindings.assembly"/>
            <package name="viskit.xsd.bindings.assembly.stats"/>
            <package name="viskit.xsd.bindings.cli"/>
            <package name="viskit.xsd.assembly"/>
            <package name="viskit.xsd.eventgraph"/>
        </javadoc>
    </target>

    <!-- === TARGET: dist === -->
    <target depends="jar, doc" name="dist">
        <mkdir dir="${dir.dist}"/>
        <mkdir dir="${dir.dist}/doc"/>
        <mkdir dir="${dir.dist}/BehaviorLibraries"/>
        <copy todir="${dir.dist}">
            <fileset dir="${dir.build.lib}"/>
        </copy>
        <copy todir="${dir.dist}/doc">
            <fileset dir="${dir.build.doc}"/>
        </copy>
        <copy todir="${dir.dist}/BehaviorLibraries">
            <fileset dir="${behavior.lib}">
                <include name="**/*.xml"/>
            </fileset>
        </copy>
    </target>

    <target depends="jar" name="gridkit-jar">
        <delete dir="${dir.dist}/gridkit-stage"/>
        <mkdir dir="${dir.dist}/gridkit-stage"/>
        <mkdir dir="${dir.dist}/gridkit"/>
        <copy todir="${dir.dist}/gridkit-stage">
            <fileset dir="${dir.build.lib}">
                <include name="visxml.jar"/>
            </fileset>
            <fileset dir="${dir.lib}">
                <include name="simkit.jar"/>
                <include name="xmlrpc-2.0.jar"/>
                <include name="bsh-2.0b1.jar"/>
                <include name="commons-configuration-1.1.jar"/>
                <include name="commons-beanutils-1.7.0.jar"/>
                <include name="commons-codec-1.3.jar"/>
                <include name="commons-collections-3.1.jar"/>
                <include name="commons-digester-1.6.jar"/>
                <include name="commons-lang-2.0.jar"/>
                <include name="commons-logging-1.0.4.jar"/>
            </fileset>
            <fileset dir="${dir.lib}/jwsdp-1.5">
                <include name="jaxb-api.jar"/>
                <include name="jaxb-impl.jar"/>
                <include name="jaxb-libs.jar"/>
            </fileset>
            <fileset dir="${dir.src.cli.util}">
                <include name="config.properties"/>
            </fileset>
        </copy>
        <mkdir dir="${dir.dist}/gridkit-stage/viskit/xsd/cli"/>
        <copy todir="${dir.dist}/gridkit-stage/viskit/xsd/cli" >
            <fileset dir="${dir.build}/classes/viskit/xsd/cli" >
                <include name="Boot.class"/>
                <include name="Launcher.class"/>
            </fileset>
        </copy>
       
        <jar basedir="${dir.dist}/gridkit-stage" 
        destfile="${dir.dist}/gridkit.jar"
        manifest="${dir.src.cli.util}/manif.txt" />
            
    </target>
    
    <taskdef classname="com.sun.tools.xjc.XJCTask" name="xjc">
        <classpath>
            <fileset dir="${dir.lib.xml}" includes="*.jar"/>
        </classpath>
    </taskdef>
    
    <taskdef classname="net.amadan.trang.ant.TrangTask" name="trang">
        <classpath>
            <fileset dir="${dir.lib}" includes="trang*.jar"/>
        </classpath>
    </taskdef>   

    <target depends="build.schema" description="Create bindings to the simkit XML Schema" name="bindings.simkit">
        <xjc package="viskit.xsd.bindings.eventgraph" schema="${dir.src.simevg.util}/simkit.xsd" target="${dir.src}">
            <produces dir="${dir.src.simevg}" includes="* impl/* impl/runtime/*" />
        </xjc>
        <xjc extension="true" package="viskit.xsd.bindings.assembly" schema="${dir.src.simasm.util}/assembly.xsd" target="${dir.src}">
            <produces dir="${dir.src.simasm}" includes="* impl/* impl/runtime/*" />
        </xjc>
        <xjc extension="true" package="viskit.xsd.bindings.assembly.stats" schema="${dir.src.simasm.util}/statistics.xsd" target="${dir.src}">
            <produces dir="${dir.src.simasm}/stats" includes="* impl/* impl/runtime/*" />
        </xjc>       
        <xjc extension="true" package="viskit.xsd.bindings.cli" schema="${dir.src.cli.util}/cli.xsd" target="${dir.src}">
            <produces dir="${dir.src.cli}" includes="* impl/* impl/runtime/*" />
        </xjc>
        <!--
        <xjc extension="true" package="viskit.xsd.bindings.sge.qstat" schema="${dir.src.sge.util}/qstat/qstat.xsd" target="${dir.src}">
        <produces dir="${dir.src.sge.qstat}" includes="* impl/* impl/runtime/*" />
        </xjc>
        -->
    </target>
    
    <target depends="build.init" description="Create xsd Schemas from dtd" name="build.schema">
        <trang failonerror="true" input="${dir.src.simevg.util}/simkit.dtd" output="${dir.src.simevg.util}/simkit.xsd" schemaIn="dtd" schemaOut="xsd"/>
        <trang failonerror="true" input="${dir.src.simasm.util}/assembly.dtd" output="${dir.src.simasm.util}/assembly.xsd" schemaIn="dtd" schemaOut="xsd"/>
        <!-- useful for autogenerating stats schema and adding type validator
        <trang failonerror="true" input="${dir.src.simasm.util}/statistics.dtd" output="${dir.src.simasm.util}/statistics.xsd" schemaIn="dtd" schemaOut="xsd"/>
        <patch patchfile="${dir.src.simasm.util}/statistics.xsd.patch" originalfile="${dir.src.simasm.util}/statistics.xsd" /> 
        -->
        <trang failonerror="true" input="${dir.src.cli.util}/cli.dtd" output="${dir.src.cli.util}/cli.xsd" schemaIn="dtd" schemaOut="xsd"/>
    </target>
    
    <target depends="bindings.simkit" description="Build bindings to Schemas" name="compile.bindings">
        <javac destdir="${dir.build.classes}"
            debug="on"
            source="1.4"
            target="1.4">
            <classpath>
                <fileset dir="${dir.lib.xml}" includes="*.jar"/>
            </classpath>
            <src path="${dir.src.simevg}"/>
        </javac>
        <copy todir="${dir.build.classes}/viskit/xsd/bindings/eventgraph">
            <fileset dir="${dir.src}/viskit/xsd/bindings/eventgraph" includes="jaxb.properties"/>
            <fileset dir="${dir.src}/viskit/xsd/bindings/eventgraph" includes="bgm.ser"/>
        </copy>
        <javac destdir="${dir.build.classes}"
            debug="on"
            source="1.4"
            target="1.4">
            <classpath>
                <fileset dir="${dir.lib.xml}" includes="*.jar"/>
            </classpath>
            <src path="${dir.src.simasm}"/>
        </javac>
        <copy todir="${dir.build.classes}/viskit/xsd/bindings/assembly">
            <fileset dir="${dir.src}/viskit/xsd/bindings/assembly" includes="jaxb.properties"/>
            <fileset dir="${dir.src}/viskit/xsd/bindings/assembly" includes="bgm.ser"/>
        </copy>
        <javac destdir="${dir.build.classes}"
            debug="on"
            source="1.4"
            target="1.4">
            <classpath>
                <fileset dir="${dir.lib.xml}" includes="*.jar"/>
            </classpath>
            <src path="${dir.src.simasm}/stats"/>
        </javac>
        <copy todir="${dir.build.classes}/viskit/xsd/bindings/assembly/stats">
            <fileset dir="${dir.src}/viskit/xsd/bindings/assembly/stats" includes="jaxb.properties"/>
            <fileset dir="${dir.src}/viskit/xsd/bindings/assembly/stats" includes="bgm.ser"/>
        </copy>
        <javac destdir="${dir.build.classes}"
            debug="on"
            source="1.4"
            target="1.4">
            <classpath>
                <fileset dir="${dir.lib.xml}" includes="*.jar"/>
            </classpath>
            <src path="${dir.src.cli}"/>
        </javac>
        <copy todir="${dir.build.classes}/viskit/xsd/bindings/cli">
            <fileset dir="${dir.src}/viskit/xsd/bindings/cli" includes="jaxb.properties"/>
            <fileset dir="${dir.src}/viskit/xsd/bindings/cli" includes="bgm.ser"/>
        </copy>
        <!--
        <javac destdir="${dir.build.classes}"
        debug="on"
        source="1.4"
        target="1.4">
        <classpath>
        <fileset dir="${dir.lib.xml}" includes="*.jar"/>
        </classpath>
        <src path="${dir.src.sge.qstat}"/>
        </javac>
        <copy todir="${dir.build.classes}/viskit/xsd/bindings/sge/qstat">
        <fileset dir="${dir.src}/viskit/xsd/bindings/sge/qstat" includes="jaxb.properties"/>
        <fileset dir="${dir.src}/viskit/xsd/bindings/sge/qstat" includes="bgm.ser"/>
        </copy>
        -->
    </target>
    
    <!-- depend create stage 1 visxml.jar which later includes stuff from this compile to make viskit.jar -->
    <target depends="jar-stage1" description="Build xml2java utils" name="compile.simxml.util">
       
        <javac destdir="${dir.build.classes}"
            debug="on"
            source="1.4"
            target="1.4">
            <classpath>
                <pathelement location="${dir.lib}/visxml.jar"/>
                <pathelement location="${dir.lib.xml}/jaxb-api.jar"/>
            </classpath>
            <src path="${dir.src.simevg.util}"/>
        </javac>
        
        <javac destdir="${dir.build.classes}"
            debug="on"
            source="1.4"
            target="1.4">
            <classpath>
                <pathelement location="${dir.lib.xml}/jaxb-api.jar"/>
                <pathelement location="${dir.lib}/bsh-2.0b1.jar"/>
            </classpath>
            <src path="${dir.src.cli.util}"/>
            <include name="Launcher.java"/>
            <include name="Boot.java"/>
        </javac>
        
        <javac destdir="${dir.build.classes}"
            debug="on"
            source="1.4"
            target="1.4">
            <classpath>
                <pathelement location="${dir.lib.xml}/jaxb-api.jar"/>
                <pathelement location="${dir.lib}/visxml.jar"/>
                <pathelement location="${dir.lib}/bsh-2.0b1.jar"/>
                <pathelement location="${dir.lib}/simkit.jar"/>
                <pathelement location="${dir.lib}/xmlrpc-2.0.jar"/>
                <pathelement location="${dir.lib}/jdom.jar"/>
                <pathelement location="${dir.lib}/xerces.jar"/>
            </classpath>
            <src path="${dir.src.simasm.util}"/>
            <include name="SimkitAssemblyXML2Java.java"/>
            <include name="ViskitAssembly.java"/>
            <include name="BasicAssembly.java"/>
            <include name="LatinPermutator.java"/>
            <include name="SessionManager.java"/>
            <include name="AssemblyServer.java"/>
            <include name="SecureAssemblyServer.java"/>
            <include name="AssemblyHandler.java"/>
            <include name="GridRunner.java"/>
            <include name="Gridlet.java"/>
            <include name="ReportStatisticsConfig.java"/>
            <include name="ReportStatisticsDOM.java"/>
            <include name="AnalystReportBuilder.java"/>
        </javac>
        

        <jar update="yes" jarfile="${dir.build.lib}/visxml.jar" basedir="${dir.build.classes}" compress="false" />
    </target>   
    
    <!-- just add new modules to the depends variable here -->
    <target depends="examples.diskit" description="compile application specific modules, like diskit" name="examples"/>
    
    <target description="diskit module" name="examples.diskit">
        <echo message="Building Diskit:"/>
        <ant dir="${dir.diskit}" target="dist"/>
        <copy file="${dir.diskit}/lib/dis.jar" todir="${dir.lib.ext}"/>
        <copy file="${dir.diskit}/dist/lib/diskit.jar" todir="${dir.lib.ext}"/> 
    </target>    

    <!-- TARGET: Run -->
    <target depends="splashy, jar, examples, checkJAVA_HOME" description="Run Viskit, include example modules if any" name="build-run">
        <java classname="viskit.EventGraphAssemblyComboMain" classpathref="runtime.classpath" fork="true"/>
    </target>
    <target depends="splashy, jar" description="Run Viskit only, no module dependency" name="build-run-orig">
        <java classname="viskit.Main" classpathref="runtime.classpath" fork="true"/>
    </target>

    <!-- TARGET: Run - no ant splash -->
    <target depends="jar, examples, checkJAVA_HOME" description="Run Viskit, include example modules if any" name="build-run-default">
        <java classname="viskit.Splash2" classpathref="runtime.classpath" fork="true">
            <arg value="viskit.EventGraphAssemblyComboMain"/>
        </java>
    </target>
    <target depends="jar" description="Run Viskit only, no module dependency" name="build-run-default-orig">
        <java classname="viskit.Splash2" classpathref="runtime.classpath" fork="true">
            <arg value="viskit.Main"/>
        </java>
    </target>

    <!-- TARGET: Quick Run, don't check deps, TBD ant should be able to not rebuild if not needed -->
    <target description="Run Viskit, don't check dependencies" name="quick-run">
        <java classname="viskit.Splash2" classpathref="runtime.classpath" fork="true">
            <arg value="viskit.EventGraphAssemblyComboMain"/>
        </java>
    </target>
    <target description="Run Viskit, don't check dependencies" name="quick-run-orig">
        <java classname="viskit.Splash2" classpathref="runtime.classpath" fork="true">
            <arg value="viskit.Main"/>
        </java>
    </target>
  
    <target description="TestCodeFormat runner" name="test-code-format">
        <java classname="viskit.test.TestCodeFormat" classpathref="runtime.classpath" fork="true">
            <arg value="viskit/test/ArrayTester.xml"/>
        </java>
    </target>
  
    <target description="Test Gridkit login" name="test-gridkit-login">
        <java classname="viskit.test.TestGridkitLogin" classpathref="runtime.classpath" fork="true">
            <arg value="localhost" />
            <arg value="4444" />
        </java>
    </target>

    <target description="Test Gridkit qstat" name="test-gridkit-qstat">
        <java classname="viskit.test.TestGridkitQstat" classpathref="runtime.classpath" fork="true">
            <arg value="localhost" />
            <arg value="4444" />
        </java>
    </target>
  
    <target description="Test Gridkit ServerAssembly3" name="test-gridkit-ServerAssembly3">
        <java classname="viskit.test.TestGridkitServerAssembly3" classpathref="runtime.classpath" fork="true">
            <arg value="localhost" />
            <arg value="4444" />
        </java>
    </target>
  
    <target depends="jar, examples" description="Run Design-Of-Experiments" name="runDOE">
        <java classname="viskit.doe.DoeMain" classpathref="runtime.classpath" fork="true" dir="${basedir}"/>
    </target>
    
    <target name="debug-quick"  description="Quick debug">
        <fail unless="netbeans.home">This target can only run inside the NetBeans IDE.</fail>
        <nbjpdastart name="Viskit" addressproperty="jpda.address" transport="dt_socket">
            <classpath path="runtime.classpath"/>
            <!-- Optional - If source roots are properly declared in project, should
            work without setting source path.     
            <sourcepath path="debug.sourcepath"/> -->
        </nbjpdastart>
        <java classname="viskit.Splash2" fork="true">
            <arg value="viskit.EventGraphAssemblyComboMain"/>
            <jvmarg value="-Xdebug"/>
            <jvmarg value="-Xnoagent"/>
            <jvmarg value="-Djava.compiler=none"/>
            <jvmarg value="-Xrunjdwp:transport=dt_socket,address=${jpda.address}"/>
            <classpath refid="runtime.classpath"/>
        </java>
    </target>
    
    <target name="debug" depends="compile" description="Debug Project">
        <fail unless="netbeans.home">This target can only run inside the NetBeans IDE.</fail>
        <nbjpdastart name="Viskit" addressproperty="jpda.address" transport="dt_socket">
            <classpath path="runtime.classpath"/>
            <!-- Optional - If source roots are properly declared in project, should
            work without setting source path.     
            <sourcepath path="debug.sourcepath"/> -->
        </nbjpdastart>
        <java fork="true" classname="viskit.Main">
            <jvmarg value="-Xdebug"/>
            <jvmarg value="-Xnoagent"/>
            <jvmarg value="-Djava.compiler=none"/>
            <jvmarg value="-Xrunjdwp:transport=dt_socket,address=${jpda.address}"/>
            <classpath refid="runtime.classpath"/>
        </java>
    </target>
    <!--
    <taskdef name="izpack" classpath="installer/lib/standalone-compiler.jar" classname="com.izforge.izpack.ant.IzPackTask"/>

    <izpack input="installer/viskit-install.xml"
    output="${dir.dist}/Viskit-install-${ver).${rel}.jar"
    installerType="standard" basedir="installer"
    izPackDir="${izpack.dir}/"/>
    -->
</project>
