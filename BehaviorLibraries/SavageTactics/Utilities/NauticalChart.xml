<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<SimEntity author="pjsulliv" extend="SimEntityBase" name="NauticalChart" package="Utilities" version="1.0" xsi:noNamespaceSchemaLocation="http://diana.gl.nps.navy.mil/Simkit/simkit.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <Comment>This object is used to collect and transmit all information that one could derive from a Nautical Chart.  Accordingly, this graph includes adapter functionality (e.g. RegisterTargetByAdapter) to allow relay objects to register through the chart.

The primary component of the chart is an array of diskit.AStarZoneGeometry which define the navigatable zones of the water space. 

Additionally, buoys, perimeter zones, piers, etc, should all pass through this class to allow other event graphs the opportunity to extract the information they need from the chart.</Comment>
    <Parameter name="navigatableWaterZones" type="diskit.AStarZoneGeometry[]">
        <Comment>The collection of zones that represent general areas of navigatable water</Comment>
    </Parameter>
    <Parameter name="waterFrontAreas" type="diskit.AStarZoneGeometry[]">
        <Comment>The areas of the waterfront that can be used by crafts for launching or water access</Comment>
    </Parameter>
    <StateVariable name="harborMap" type="diskit.AStarZoneMap">
        <Comment>The diskit.AStarZoneMap created using the specified zones</Comment>
    </StateVariable>
    <Event name="Run">
        <Comment/>
        <Schedule condition="true" delay="0.0" event="CreateHarborMap" priority="0">
            <Comment/>
        </Schedule>
        <Code/>
        <Coordinate x="30" y="20"/>
    </Event>
    <Event name="CreateHarborMap">
        <Comment>Creates a new instance of diskit.AStarZoneMap with the zones that were passed to the constructor</Comment>
        <StateTransition state="harborMap">
            <Assignment value="new diskit.AStarZoneMap(navigatableWaterZones)"/>
        </StateTransition>
        <StateTransition state="harborMap">
            <Operation method="setPerimeterZones(waterFrontAreas)"/>
        </StateTransition>
        <StateTransition state="harborMap">
            <Operation method="setNavigatableZones(navigatableWaterZones)"/>
        </StateTransition>
        <Schedule condition="true" delay="0.0" event="RegisterAStarZoneMap" priority="0">
            <Comment/>
            <EdgeParameter value="harborMap"/>
        </Schedule>
        <Code/>
        <Coordinate x="30" y="130"/>
    </Event>
    <Event name="RegisterAStarZoneMap">
        <Comment>The event which publishes all nautical chart information to the listeners of this object</Comment>
        <Argument name="chart" type="diskit.AStarZoneMap">
            <Comment>The navigatable water, in AStar search format</Comment>
        </Argument>
        <Code/>
        <Coordinate x="30" y="220"/>
    </Event>
</SimEntity>

