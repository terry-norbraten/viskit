<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<SimEntity author="pjsulliv" extend="diskit.FriendlyForce" name="HVU" package="diskit" version="1.0" xsi:noNamespaceSchemaLocation="http://diana.gl.nps.navy.mil/Simkit/simkit.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <Parameter name="startPosition" type="diskit.Vec3d">
        <Comment/>
    </Parameter>
    <Parameter name="cruisingSpeed" type="double">
        <Comment/>
    </Parameter>
    <Parameter name="moverID" type="int">
        <Comment/>
    </Parameter>
    <StateVariable name="tacticalMode" type="diskit.TacticalMode">
        <Comment/>
    </StateVariable>
    <StateVariable name="exclusionBounds" type="double">
        <Comment/>
    </StateVariable>
    <StateVariable name="exclusionZone" type="diskit.Sensor">
        <Comment/>
    </StateVariable>
    <Event name="Run">
        <Comment/>
        <StateTransition state="tacticalMode">
            <Assignment value="diskit.TacticalMode.TRANSITING"/>
        </StateTransition>
        <StateTransition state="exclusionBounds">
            <Assignment value="700"/>
        </StateTransition>
        <Code/>
        <Coordinate x="30" y="30"/>
    </Event>
    <Event name="Detection">
        <Comment/>
        <Argument name="sensor" type="diskit.Sensor"/>
        <Argument name="contact" type="diskit.Mover3D"/>
        <Schedule condition="!friendlyForces.contains(new Integer(contact.getMoverID()))" delay="0.0" event="CommsOrderIDContact" priority="0">
            <Comment/>
            <EdgeParameter value="contact"/>
            <EdgeParameter value="sensor"/>
            <EdgeParameter value="this"/>
        </Schedule>
        <Code>System.out.println("HVU detected entity# " + contact.getMoverID());</Code>
        <Coordinate x="30" y="150"/>
    </Event>
    <Event name="CommsOrderIDContact">
        <Comment>Order to assets to identify inbound contact and clear them from the exclusion zone</Comment>
        <Argument name="contact" type="diskit.Mover3D"/>
        <Argument name="sensor" type="diskit.Sensor"/>
        <Argument name="originator" type="diskit.Mover3D"/>
        <Code>System.out.println( "[OIL PLATFORM] - Patrol Craft, ID contact number " + contact.getMoverID()); </Code>
        <Coordinate x="30" y="250"/>
    </Event>
    <Event name="Init">
        <Comment/>
        <Argument name="entity" type="simkit.SimEntity"/>
        <StateTransition state="exclusionZone">
            <Assignment value="new diskit.SphereCutterSensor(this,exclusionBounds)"/>
        </StateTransition>
        <Schedule condition="entity == this" delay="0.0" event="RegisterTarget" priority="0">
            <Comment/>
            <EdgeParameter value="this"/>
        </Schedule>
        <Schedule condition="entity == this" delay="0.0" event="RegisterSensor" priority="0">
            <Comment/>
            <EdgeParameter value="exclusionZone"/>
        </Schedule>
        <Code/>
        <Coordinate x="120" y="30"/>
    </Event>
    <Event name="RegisterTarget">
        <Comment/>
        <Argument name="target" type="diskit.Mover3D"/>
        <Code/>
        <Coordinate x="210" y="30"/>
    </Event>
    <Event name="RegisterSensor">
        <Comment/>
        <Argument name="newPercept" type="diskit.Sensor"/>
        <LocalVariable name="sensor" type="diskit.Sensor" value="newPercept">
            <Comment/>
        </LocalVariable>
        <Code>sensor.addSimEventListener(this);</Code>
        <Coordinate x="210" y="110"/>
    </Event>
</SimEntity>

